---
title: The Rules of Go, formally stated
layout: default
category: games
---

<h2>The Rules</h2>

Define the <em>board graph</em> \((V, \leftrightarrow)\) as

\[
V \triangleq \{ (i,j) \in \mathbb{N}^2 \mid 1 \leq i,j \leq 19 \}
\]
\[
(i_1,j_1) \leftrightarrow (i_2, j_2) \iff |i_2-i_1| + |j_2-j_1| = 1
\]

Define 

<ul>
  <li>\(\text{Player}=\{ \text{Black}, \text{White}\}\)</li>
  <li>\(p^\ast = \begin{cases}\text{White} & p=\text{Black}\\\text{Black} & p=\text{White}\end{cases}\)</li>
  <li>\(\text{Color}=P\cup \{ \text{Empty}\}\)</li>
  <li>\(\text{Board} : V \to \text{Color}\)</li>
  <li>\(\text{Move} = V \cup \{ \text{Pass} \}\)</li>
</ul>

Define \(\operatorname{move} : \text{Move} \times \text{Player} \times \text{Board} \rightarrow \text{Board}\cup\{\text{Error}\}\) as

\[
\operatorname{move}(m,p,b) = \begin{cases}
b & m = \text{Pass}\\
\operatorname{clear}(p,\operatorname{clear}(p^\ast, b[m\mapsto p])) & m \neq \text{Pass}\land b(m) = \text{Empty}\\
\text{Error} & m \neq \text{Pass} \land b(m) \neq \text{Empty}
\end{cases}
\]

where

\[
b[m\mapsto p](v) = \begin{cases}
p & v = m\\
b(v) & v \neq m
\end{cases}
\]

\[
\operatorname{clear}(p,b)(v) = \begin{cases}
b(v) & \operatorname{reaches}(v,\text{Empty},b)\\
\text{Empty} & \lnot\operatorname{reaches}(v,\text{Empty},b)
\end{cases}
\]

\[\displaylines{
\operatorname{reaches}(v,c,b) \iff b(v) = c\lor \exists w. v\leftrightarrow w \land (b(w) = c \\\lor 
(b(v)=b(w)\land \operatorname{reaches}(w,c,b)))
}\]

TODO: fix this definition of reaches.

Define \(\operatorname{score} : \text{Player} \times \text{Board}\to\mathbb{N}\) as

\[\displaylines{
\operatorname{score}(p,b) = |\{ v \in V : b(v) = p \lor (b(v)=\text{Empty}\\ \land \operatorname{reaches}(v,p,b) \land \lnot\operatorname{reaches}(v,p^\ast,b)\}|
}\]

A <em>game</em> is a finite sequence of moves/players \((m_0,p_0),\ldots,(m_{n-1},p_{n-1})\) such that \(p_0 = \text{Black}\) and for all \(0 \leq i < n-1\), \( p_{i+1} = p_i^\ast\) and \( m_i = m_{i+1} = \text{Pass} \iff i+1 = n-1\), and there exist (necessarily unique) boards \(b_0,\ldots,b_n\) satisfying

<ul>
  <li>\(b_0(v)=\text{Empty}\)</li>
  <li>For all \(0 \leq i < n\), \(b_{i+1} = \operatorname{move}(m_i,p_i,b_i)\) and \(m_i = \text{Pass} \lor \forall 0 \leq j < i \,.\, b_j \neq b_{i+1}\).</li>
</ul>

Define \(\operatorname{result} : \text{Game}\to\text{Player}\cup\{\text{Draw}\}\) as

\[
\operatorname{result}(g) = \begin{cases}
\text{Black}&\Phi_\text{Black}>\Phi_\text{White}\\
\text{Draw}&\Phi_\text{Black}=\Phi_\text{White}\\
\text{White}&\Phi_\text{Black}<\Phi_\text{White}
\end{cases}
\]

where \(\Phi_p = \operatorname{score}(p, b_n)\) where the associated boards are denoted by \(b_0,\ldots,b_n\).

<h2>Comments</h2>

<ul>
  <li>These rules are based on the Tromp&ndash;Taylor rules of Go.</li>
  <li>Board graphs of size 9 or 13 are often used for beginner play, though any undirected graph will suffice.</li>
  <li>For handicap games, the first \(n\) moves may be played by Black.</li>
  <li>On any move, at most one of the clearing processes can have any effect. (Perhaps I&#8217;ll prove this later.)</li>
  <li>As a practical shortcut, the game may end early either by one player&#8217;s resignation or the agreement of both players on points of each colour that may be emptied prior to scoring.</li>
  <li>By prior agreement, a fixed amount may be added to White&#8217;s final score to compensate for the disadvantage of moving second. This amount may be fractional to avoid draws. For expert players and computers, the fairest amount is probably 7, or 6&half; if draws are undesirable. It is probably 7 for perfect play also.</li>
</ul>

<h2>Thoughts</h2>

I think it&#8217;s valuable to have the rules of a game formally stated so that there can be absolutely no ambiguity. Of course, a concise natural-language description of the rules may be presented for accessibility, but there are many advantages to the provision of a formal statement, which could be supported by simple lemmas about the game verifiable in a proof assistant. For example, with Go you could verify the set of legal moves from a given point in a game, or verify simple life-and-death problems. Perhaps I will do this at some point.